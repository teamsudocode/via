<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <style>
         .container {
             height: 100%;
             display: flex;
             flex-direction: column;
             justify-content: center;
             align-items: center;
         }
         .container .paramter {
             margin: 20px;
             text-align: left;
             width: 80%;
         }
         button {
             border: none;
             padding: 15px;
             font-size: 1.5em;
             border-radius: 5px;
         }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="parameter">
                t : <span id="t"></span>
            </div>
            <div class="parameter">
                X : <span id="x"></span>
            </div>
            <div class="parameter">
                Y : <span id="y"></span>
            </div>
            <div class="parameter">
                X : <span id="z"></span>
            </div>
            <div class="parameter">
                <button id="btn">Start</button>
            </div>
        </div>
        <script src="/socket.io/socket.io.js"></script>
        <script>
         var elems = {
             t: document.getElementById('t'),
             x: document.getElementById('x'),
             y: document.getElementById('y'),
             z: document.getElementById('z'),
             btn: document.getElementById('btn')
         }
         var running = false

         var socket = io()

         var sensor = new Accelerometer()
         sensor.onreading = () => {
             let t = (new Date()).getTime()
             socket.emit('data', {
                 t: t,
                 x: sensor.x,
                 y: sensor.y,
                 z: sensor.z
             })
             elems.t.innerText = t
             elems.x.innerText = sensor.x
             elems.y.innerText = sensor.y
             elems.z.innerText = sensor.z
         }

         elems.btn.onclick = () => {
             if (running) {
                 sensor.stop()
                 elems.btn.innerText = 'Start'
             } else {
                 sensor.start()
                 elems.btn.innerText = 'Stop'
             }
             running = !running
         }
        </script>
    </body>
</html>
